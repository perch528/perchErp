<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登录 - 与Python后端交互</title>
    <!-- 引入Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- 引入jQuery -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
    <div class="bg-white rounded-lg shadow-lg w-full max-w-md p-8">
        <h2 class="text-2xl font-bold text-center mb-6 text-gray-800">
            <i class="fa fa-lock text-blue-500 mr-2"></i>用户登录
        </h2>

        <!-- 登录表单 -->
        <form action="/login/" method="post" id="loginForm" class="space-y-4">
            <div>
                <label for="username" class="block text-gray-700 mb-1">
                    <i class="fa fa-user text-blue-500 mr-1"></i>用户名
                </label>
                <input 
                    type="text" 
                    id="username" 
                    name="username" 
                    class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                    placeholder="请输入用户名"
                    required
                >
            </div>

            <div>
                <label for="password" class="block text-gray-700 mb-1">
                    <i class="fa fa-key text-blue-500 mr-1"></i>密码
                </label>
                <input 
                    type="password" 
                    id="password" 
                    name="password" 
                    class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                    placeholder="请输入密码"
                    required
                >
            </div>

            <!-- 错误提示 -->
            <div id="errorMsg" class="text-red-500 text-sm hidden"></div>

            <!-- 登录按钮 -->
            <button 
                type="submit" 
                id="loginBtn"
                class="w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition-colors duration-300 font-medium flex items-center justify-center"
            >
                <i class="fa fa-sign-in mr-2"></i>登录
                <span id="loading" class="hidden"><i class="fa fa-spinner fa-spin ml-2"></i></span>
            </button>
        </form>
    </div>

   <script>
        // 页面加载完成后执行
        $(document).ready(function() {
            // 监听表单提交
            $('#loginForm').submit(function(e) {
                // 获取表单数据
                const username = $('#username').val().trim();
                const password = $('#password').val().trim();

                // 仅保留前端简单验证，不阻止表单默认提交
                if (!username || !password) {
                    e.preventDefault(); // 只有验证失败时才阻止提交
                    showError('请输入用户名和密码');
                    return false;
                }

                // 验证通过则不阻止，让表单正常提交
                // 显示加载状态
                showLoading(true);
                // 表单会自然提交，后端重定向由浏览器自动处理
            });

            // 简化的工具函数
            function showError(message) {
                $('#errorMsg').text(message).removeClass('hidden');
                setTimeout(() => $('#errorMsg').addClass('hidden'), 3000);
            }

            function showLoading(show) {
                $('#loading').toggle(show);
                $('#loginBtn').prop('disabled', show);
            }
        });

    </script> 
</body>
</html>
    